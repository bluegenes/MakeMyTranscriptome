## Input
The Annotation tool is a pipeline that will run a series of tools designed to provide information about
the assembled transcripts. It will then compile this information into a helpful table, as well as producing some graphs of the output. To execute the annotation tool, simply call

```
python pipeline.py annotation [INPUT] [OPTIONS] [FLAGS]

Input - This argument is required
  -a ASSEMBLY, --assembly ASSEMBLY
                        A fasta transcriptome assembly that needs to be
                        annotated.

Options
  --cpu CPU             Sets the thread cap for execution. Default is 12. Use
                        0 to indicate no process cap should be used.
  --email EMAIL         Pipeline will send emails informing you of runstate.
  --out_dir OUT_DIR     Path to the ouput location. Defaults to assemblies
                        directory inside pipeline
  -o OUT_NAME, --out_name OUT_NAME
                        The name of the output directory to be made in
                        out_dir. If unused, name will be inherited from input
                        file names

Flags
  -blast_uniref90       Use this flag to enable the uniref-90 blast runs as
                        part of the annotation pipeline.
  -blast_nr             Use this flag to enable the NR (non-redundant protein
                        database) blast runs as part of the annotation
                        pipeline. This could take a very long time to
                        complete.
  -no_log               Pipeline will delete log files.
  -force                Use this flag to perform a fresh run of the pipeline.
                        All steps will be executed regardless of what has
                        already been performed.
```

The output of the annotation tool is an assembly directory, identical in basic structure to the output of every other tool. The principle output is located in the root of the assembly directory and called "\<out\_name\>\_annotation\_table.tsv" where \<out\_name\> is the '--out_name' parameter described above. It is a compilation of all of the information generated by the annotation tools included in the pipeline. In the following tree, "--" mean that the object is a file while ">>" means the object is a directory.

```
<out_name>
    --<out_name>.fasta
    --run.log
    --<out_name>_annotation_table.tsv
    >>annotation_files
        --myassembly.fasta.rnammer.gff
        --myassembly.gene_trans_map
        --myassembly.pfam
        --myassembly.tmhmm
        --myassembly_uniprot_sprot.blastp
        --myassembly_uniprot_sprot.blastx
        --myassembly_uniref90.blastp
        --myassembly_uniref90.blastx
        --myassembly.signalp
        >>transdecoder
    >>assembly_files
    >>expression_files
    >>logs
```

### Description of output files and directories
**&lt;out\_name>** - This directory is the output directory generated by running OCT. It is taken directly from the "--out\_name"  option. If the option is not specified, OCT will construct a name from the input fasta file names.

**&lt;out\_name>.fasta** - This file contains the provided assembly that OCT is annotating. It has been copied here so that you can easily keep your assembly with your data. This file inherits its name from the name of the output directory

**\<out\_name\>\_annotation\_table.tsv** - This file compiles all of the output of the various annotation tools into a single easily parsable tab separated file. For a full description of the contents of this file and advice on parsing, consult the [annotation table](annotation_table) wiki page

**run.log** - This file contains a log of all of the jobs performed by OCT, and when they were performed.

**annotation_files** - This Directory contains all files generated by running the annotation tool.

**myassembly.fasta.rnammer.gff** - This file contains output from the RNAmmer tool. It is a tool designed to identify ribosomal transcripts. you can find more information about the output and the tool [at this link](http://www.cbs.dtu.dk/services/RNAmmer/output.php).

**myassembly.gene\_trans\_map** - A simple tab separated file that maps trinity transcript ids to gene ids.

**myassembly.pfam** - Contains output from running hmmscan on the transdecoder output against the database of protein families. The goal of the tool is to identity what protein family each of your transcripts belongs to. You can find more information about hmmscan and this output file [at this link](ftp://selab.janelia.org/pub/software/hmmer/CURRENT/Userguide.pdf).

**myassembly.tmhmm** - Contains output from running tmhmm on the transdecoder output. This tool identifies trans-membrane proteins, and classifies the regions of the protein according to whether they are a loop region or a transmembrane helice. You can find more information about the tool and the file [at this link](http://www.cbs.dtu.dk/services/TMHMM/TMHMM2.0b.guide.php)

**myassembly\_uniprot\_sprot.blastp** - Contains the tabular output from running the blast protein search of the uniprot swissprot database using the output from transdecoder as a query.

**myassembly\_uniprot\_sprot.blastx** - Contains the tabular output from running blastx search of the uniprot swissprot database using the provided assembly as a query.

**myassembly\_uniref90.blastp** - Contains the tabular output from running the blast protein search of the uniprot uniref90 database using the output from transdecoder as a query.

**myassembly\_uniref90.blastx** -  Contains the tabular output from running blastx search of the uniprot uniref90 database using the provided assembly as a query.

**\<out\_name\>.signalp** - Contatins the output from running the SignalP tool on the transdecoder output. The goal of this tool is to identify signal peptides in the constructed protein sequences. You can find more information about the tool and this file [at this link](http://www.cbs.dtu.dk/services/SignalP/). 

**transdecoder** - This directory contains the output from running Transdecoder on the provided assembly. Transdecoder is a tool that identifies open reading frames within rnaseq data allowing for the digital translation of the rna sequences into protein sequences. you can find more information about the files contained in this directory and the transdecoder tool [at this link](http://transdecoder.github.io/).

**assembly\_files** - This directory contains all files generated by running the assembly tool. It is not populated by the annotation tool. to populate this directory, execute the assembly tool.

**expression\_files** - This directory contains all files generated by running the expression tool. It is not populated by the annotation tool. to populate this directory, execute the expression tool.

**logs** -  This directory contains logs for every job performed by OCT. It is partially populated by every tool.



